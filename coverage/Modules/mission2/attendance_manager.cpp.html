<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>attendance_manager.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#include "attendance_manager.h"
#include &lt;iostream&gt;

void AttendanceManager::setFileReader(std::shared_ptr&lt;FileReader&gt; fileReader)
<span style = "background-color:#dfd">{
	this-&gt;fileReader = fileReader;
}</span>

void AttendanceManager::parseFileAndMakeAttendList()
<span style = "background-color:#dfd">{
	for (int i = 0; i &lt; NUM_MAX_LINE; ++i) {
		auto attendance = getNextAttendance();</span>

<span style = "background-color:#dfd">		checkAndRegisterAttendees(attendance);
	}
}</span>

AttendanceFormat AttendanceManager::getNextAttendance()
<span style = "background-color:#dfd">{
	AttendanceFormat attendance;</span>
	//name
<span style = "background-color:#dfd">	attendance.name = fileReader-&gt;getNext();</span>
	//dayOfWeek
<span style = "background-color:#dfd">	attendance.dayOfWeek = fileReader-&gt;getNext();</span>

<span style = "background-color:#dfd">	return attendance;
}</span>

void AttendanceManager::checkAndRegisterAttendees(const AttendanceFormat&amp; atendance)
<span style = "background-color:#dfd">{
	attendeesDB.attend(atendance.name, atendance.dayOfWeek);
}</span>

void AttendanceManager::printAttendees(std::shared_ptr&lt;Attendees&gt; attendees)
<span style = "background-color:#dfd">{
	std::cout &lt;&lt; "NAME : " &lt;&lt; attendees-&gt;getName() &lt;&lt; ", ";
	std::cout &lt;&lt; "POINT : " &lt;&lt; attendees-&gt;getPoint() &lt;&lt; ", ";
	std::cout &lt;&lt; "GRADE : " &lt;&lt; attendees-&gt;getGrade()-&gt;getGradeName() &lt;&lt; "\n";
}</span>

<span style = "background-color:#dfd">void AttendanceManager::printRemovePlayer() {
	std::cout &lt;&lt; "\n";
	std::cout &lt;&lt; "Removed player\n";
	std::cout &lt;&lt; "==============\n";
	for (int id = 1; id &lt;= attendeesDB.getMaxId(); id++) {
		auto attendees = attendeesDB.getAttendeesFromId(id);</span>

<span style = "background-color:#dfd">		if (attendees-&gt;isRemovePlayer()) {
			std::cout &lt;&lt; attendees-&gt;getName() &lt;&lt; "\n";</span>
		}
<span style = "background-color:#dfd">	}
}</span>

void AttendanceManager::calPointAllAttendees()
<span style = "background-color:#dfd">{
	for (int id = 1; id &lt;= attendeesDB.getMaxId(); ++id) {
		auto attendees = attendeesDB.getAttendeesFromId(id);
		attendees-&gt;calPoint();
	}
}</span>

void AttendanceManager::setGradeAllAttendees()
<span style = "background-color:#dfd">{
	for (int id = 1; id &lt;= attendeesDB.getMaxId(); ++id) {
		auto attendees = attendeesDB.getAttendeesFromId(id);
		auto grade = gradeGenerator.makeGrade(attendees-&gt;getPoint());</span>

<span style = "background-color:#dfd">		attendees-&gt;setGrade(grade);
	}
}</span>

void AttendanceManager::printAttendanceInfo()
<span style = "background-color:#dfd">{
	for (int id = 1; id &lt;= attendeesDB.getMaxId(); ++id) {
		auto attendees = attendeesDB.getAttendeesFromId(id);</span>

<span style = "background-color:#dfd">		printAttendees(attendees);
	}</span>

<span style = "background-color:#dfd">	printRemovePlayer();
}</span>

void AttendanceManager::process()
<span style = "background-color:#dfd">{
	parseFileAndMakeAttendList();
	calPointAllAttendees();
	setGradeAllAttendees();
}</span></pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>